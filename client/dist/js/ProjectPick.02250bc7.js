(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ProjectPick"],{"42ae":function(e,t,n){"use strict";n("9ffe")},7602:function(e,t,n){},"793b":function(e,t,n){"use strict";n("7602")},"969a":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c={class:"setup-page"},o={id:"setup-container",class:"setup-container"},a={class:"input-container"},i={class:"input-container"},u={class:"button-container"};function l(e,t,n,l,s,d){var p=Object(r["resolveComponent"])("ProjectPick"),b=Object(r["resolveComponent"])("QueriesPick"),f=Object(r["resolveComponent"])("q-btn");return Object(r["openBlock"])(),Object(r["createElementBlock"])("section",c,[Object(r["createElementVNode"])("header",null,[Object(r["createElementVNode"])("h1",null,Object(r["toDisplayString"])(e.$t("setupTitle")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.$t("setupHelper")),1)]),Object(r["createElementVNode"])("section",o,[Object(r["createElementVNode"])("article",a,[Object(r["createVNode"])(p)]),Object(r["createElementVNode"])("article",i,[Object(r["createVNode"])(b)])]),Object(r["createElementVNode"])("div",u,[Object(r["createVNode"])(f,{disabled:!l.store.state.query.id,class:"action",onClick:l.proceedToKanbanBoard},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("proceed")),1)]})),_:1},8,["disabled","onClick"])])])}var s={class:"section-title"};function d(e,t,n,c,o,a){var i=Object(r["resolveComponent"])("q-select");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("p",s,Object(r["toDisplayString"])(e.$t("pSelect")),1),Object(r["createVNode"])(i,{modelValue:c.selectedProject,"onUpdate:modelValue":[t[0]||(t[0]=function(e){return c.selectedProject=e}),c.updateProject],outlined:"",options:c.projectsOrdered,"option-value":"value","option-label":"name",label:e.$t("project"),"input-debounce":"10","use-input":"","hide-selected":"","fill-input":"",onFilter:c.filterFn},null,8,["modelValue","options","label","onFilter","onUpdate:modelValue"])],64)}var p=n("2909"),b=n("1da1"),f=(n("96cf"),n("4de4"),n("d3b7"),n("b0c0"),n("99af"),n("d81d"),n("7cc0")),j=n("5502"),v={name:"ProjectPick",components:{},emits:["projectPicked"],setup:function(){var e,t,n=Object(r["ref"])(),c=Object(r["ref"])(),o=Object(j["b"])();function a(){return i.apply(this,arguments)}function i(){return i=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,n,r,c,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,f["a"].getProjects(o.state.user.api_key,r);case 3:return c=e.sent,e.abrupt("return",{projects:(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.projects)||[],totalCount:(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.total_count)||0});case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return l=Object(b["a"])(regeneratorRuntime.mark((function r(){var c,o,i,u,l,s,d,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return c=100,r.next=3,a();case 3:if(o=r.sent,i=o.projects,u=o.totalCount,t=Object(p["a"])(i),!(u>c)){r.next=19;break}l=Math.ceil(u/c),s=1;case 10:if(!(s<l)){r.next=19;break}return r.next=13,a(s*c);case 13:d=r.sent,b=d.projects,t=[].concat(Object(p["a"])(t),Object(p["a"])(b));case 16:s+=1,r.next=10;break;case 19:n.value=t.map((function(e){var t=e.id,n=e.name;return{value:t,name:n}})),e=n.value;case 21:case"end":return r.stop()}}),r)}))),l.apply(this,arguments)}function s(){o.commit({type:"addProject",payload:t.filter((function(e){return e.id===c.value.value}))[0]})}function d(t,r){r((function(){var r=t.toLowerCase();n.value=e.filter((function(e){return e.name.toLowerCase().indexOf(r)>-1}))}))}return Object(r["onMounted"])(u),{projectsOrdered:n,selectedProject:c,updateProject:s,filterFn:d}}},m=(n("793b"),n("6b0d")),O=n.n(m),k=n("ddd8"),h=n("8572"),w=n("93dc"),y=n.n(w);const V=O()(v,[["render",d],["__scopeId","data-v-2e5bb9ce"]]);var g=V;y()(v,"components",{QSelect:k["a"],QField:h["a"]});var P={class:"section-title"};function x(e,t,n,c,o,a){var i=Object(r["resolveComponent"])("q-select");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("p",P,Object(r["toDisplayString"])(e.$t("qSelect")),1),Object(r["createVNode"])(i,{modelValue:c.selectedQuerie,"onUpdate:modelValue":[t[0]||(t[0]=function(e){return c.selectedQuerie=e}),c.updateQuery],outlined:"",options:c.queiresOrdered,"option-value":"id","option-label":"name",label:e.$t("query"),"input-debounce":"10","use-input":"","hide-selected":"","fill-input":"",disable:0===c.queiresOrdered.length,onFilter:c.filterFn},null,8,["modelValue","options","label","disable","onFilter","onUpdate:modelValue"])],64)}var C={name:"ProjectPick",components:{},setup:function(){var e,t,n=Object(r["ref"])(),c=Object(r["ref"])(),o=Object(j["b"])(),a=Object(r["ref"])([]);function i(){return u.apply(this,arguments)}function u(){return u=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,n,r,c,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,f["a"].getProjectQueries(o.state.user.api_key,r);case 3:return c=e.sent,e.abrupt("return",{queries:(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.queries)||[],totalCount:(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.total_count)||0});case 5:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(){return s.apply(this,arguments)}function s(){return s=Object(b["a"])(regeneratorRuntime.mark((function n(){var r,u,l,s,d,b,f,j,v;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c.value=null,r=100,n.next=4,i();case 4:if(u=n.sent,l=u.queries,s=u.totalCount,e=Object(p["a"])(l),!(s>r)){n.next=20;break}d=Math.ceil(s/r),b=1;case 11:if(!(b<d)){n.next=20;break}return n.next=14,i(b*r);case 14:f=n.sent,j=f.queries,e=[].concat(Object(p["a"])(e),Object(p["a"])(j));case 17:b+=1,n.next=11;break;case 20:v=e.filter((function(e){return(null===e||void 0===e?void 0:e.project_id)===o.state.project.id})),a.value=v.map((function(e){var t=e.id,n=e.name;return{value:t,name:n}})),t=a.value;case 23:case"end":return n.stop()}}),n)}))),s.apply(this,arguments)}function d(e,n){n((function(){var n=e.toLowerCase();a.value=t.filter((function(e){return e.name.toLowerCase().indexOf(n)>-1}))}))}function v(){o.commit({type:"addQuerie",payload:e.filter((function(e){return e.id===c.value.value}))[0]})}return Object(r["watch"])((function(){return o.state.project.id}),(function(){l()})),Object(r["onMounted"])((function(){})),{projectsOrdered:n,selectedQuerie:c,queiresOrdered:a,filterFn:d,updateQuery:v,store:o}}};n("bd3c");const N=O()(C,[["render",x],["__scopeId","data-v-7b5d8c17"]]);var Q=N;y()(C,"components",{QSelect:k["a"],QField:h["a"]});var q=n("6c02"),E={name:"Setup",components:{ProjectPick:g,QueriesPick:Q},setup:function(){var e=Object(r["ref"])(!1),t=Object(q["c"])(),n=Object(j["b"])();function c(){t.push("/kanban")}return{projectSelected:e,proceedToKanbanBoard:c,store:n}}},F=(n("42ae"),n("9c40")),_=n("9404");const S=O()(E,[["render",l],["__scopeId","data-v-186402b9"]]);t["default"]=S;y()(E,"components",{QBtn:F["a"],QDrawer:_["a"]})},"9ffe":function(e,t,n){},bd3c:function(e,t,n){"use strict";n("d18f")},d18f:function(e,t,n){}}]);
//# sourceMappingURL=ProjectPick.02250bc7.js.map