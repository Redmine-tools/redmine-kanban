(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ProjectPick"],{"28d4":function(e,t,n){"use strict";n("3cce")},"3cce":function(e,t,n){},"42ae":function(e,t,n){"use strict";n("9ffe")},"969a":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c={class:"setup-page"},a={id:"setup-container",class:"setup-container"},o={class:"input-container"},i={class:"input-container"},u={class:"button-container"};function l(e,t,n,l,s,d){var p=Object(r["resolveComponent"])("ProjectPick"),b=Object(r["resolveComponent"])("QueriesPick"),j=Object(r["resolveComponent"])("q-btn");return Object(r["openBlock"])(),Object(r["createElementBlock"])("section",c,[Object(r["createElementVNode"])("header",null,[Object(r["createElementVNode"])("h1",null,Object(r["toDisplayString"])(e.$t("setupTitle")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.$t("setupHelper")),1)]),Object(r["createElementVNode"])("section",a,[Object(r["createElementVNode"])("article",o,[Object(r["createVNode"])(p)]),Object(r["createElementVNode"])("article",i,[Object(r["createVNode"])(b)])]),Object(r["createElementVNode"])("div",u,[Object(r["createVNode"])(j,{disabled:!l.store.state.query.id,class:"action",onClick:l.proceedToKanbanBoard},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("proceed")),1)]})),_:1},8,["disabled","onClick"])])])}var s={class:"section-title"};function d(e,t,n,c,a,o){var i=Object(r["resolveComponent"])("q-select");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("p",s,Object(r["toDisplayString"])(e.$t("pSelect")),1),Object(r["createVNode"])(i,{modelValue:c.selectedProject,"onUpdate:modelValue":[t[0]||(t[0]=function(e){return c.selectedProject=e}),c.updateProject],outlined:"",options:c.projectsOrdered,"option-value":"value","option-label":"name",label:e.$t("project"),"input-debounce":"10","use-input":"","hide-selected":"","fill-input":"",onFilter:c.filterFn},null,8,["modelValue","options","label","onFilter","onUpdate:modelValue"])],64)}var p=n("2909"),b=n("1da1"),j=(n("96cf"),n("b0c0"),n("4de4"),n("d3b7"),n("99af"),n("d81d"),n("7cc0")),f=n("5502"),v={name:"ProjectPick",components:{},setup:function(){var e,t,n,c,a=Object(r["ref"])(),o=Object(f["b"])(),i=Object(r["ref"])(null!==(e=o.state)&&void 0!==e&&null!==(t=e.project)&&void 0!==t&&t.id?{value:o.state.project.id,name:o.state.project.name}:{});function u(){return l.apply(this,arguments)}function l(){return l=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,n,r,c,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,j["a"].getProjects(o.state.user.api_key,r);case 3:return c=e.sent,e.abrupt("return",{projects:(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.projects)||[],totalCount:(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.total_count)||0});case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function s(){return d.apply(this,arguments)}function d(){return d=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,r,o,i,l,s,d,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=100,e.next=3,u();case 3:if(r=e.sent,o=r.projects,i=r.totalCount,c=Object(p["a"])(o),!(i>t)){e.next=19;break}l=Math.ceil(i/t),s=1;case 10:if(!(s<l)){e.next=19;break}return e.next=13,u(s*t);case 13:d=e.sent,b=d.projects,c=[].concat(Object(p["a"])(c),Object(p["a"])(b));case 16:s+=1,e.next=10;break;case 19:a.value=c.map((function(e){var t=e.id,n=e.name;return{value:t,name:n}})),n=a.value;case 21:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function v(){o.commit({type:"addProject",payload:c.filter((function(e){return e.id===i.value.value}))[0]})}function m(e,t){t((function(){var t=e.toLowerCase();a.value=n.filter((function(e){return e.name.toLowerCase().indexOf(t)>-1}))}))}return Object(r["onMounted"])(s),{projectsOrdered:a,selectedProject:i,updateProject:v,filterFn:m}}},m=(n("28d4"),n("6b0d")),O=n.n(m),k=n("ddd8"),h=n("8572"),y=n("93dc"),w=n.n(y);const V=O()(v,[["render",d],["__scopeId","data-v-70b3643a"]]);var g=V;w()(v,"components",{QSelect:k["a"],QField:h["a"]});var x={class:"section-title"};function P(e,t,n,c,a,o){var i=Object(r["resolveComponent"])("q-select");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("p",x,Object(r["toDisplayString"])(e.$t("qSelect")),1),Object(r["createVNode"])(i,{modelValue:c.selectedQuerie,"onUpdate:modelValue":[t[0]||(t[0]=function(e){return c.selectedQuerie=e}),c.updateQuery],outlined:"",options:c.queiresOrdered,"option-value":"id","option-label":"name",label:e.$t("query"),"input-debounce":"10","use-input":"","hide-selected":"","fill-input":"",disable:0===c.queiresOrdered.length,onFilter:c.filterFn},null,8,["modelValue","options","label","disable","onFilter","onUpdate:modelValue"])],64)}var q={name:"ProjectPick",components:{},setup:function(){var e,t,n,c,a=Object(r["ref"])(),o=Object(f["b"])(),i=Object(r["ref"])(null!==(e=o.state)&&void 0!==e&&null!==(t=e.query)&&void 0!==t&&t.id?{value:o.state.query.id,name:o.state.query.name}:{}),u=Object(r["ref"])([]);function l(){return s.apply(this,arguments)}function s(){return s=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,n,r,c,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,j["a"].getProjectQueries(o.state.user.api_key,r);case 3:return c=e.sent,e.abrupt("return",{queries:(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.queries)||[],totalCount:(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.total_count)||0});case 5:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(){return v.apply(this,arguments)}function v(){return v=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,d,b,j,f,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.value=null,t=100,e.next=4,l();case 4:if(r=e.sent,a=r.queries,s=r.totalCount,n=Object(p["a"])(a),!(s>t)){e.next=20;break}d=Math.ceil(s/t),b=1;case 11:if(!(b<d)){e.next=20;break}return e.next=14,l(b*t);case 14:j=e.sent,f=j.queries,n=[].concat(Object(p["a"])(n),Object(p["a"])(f));case 17:b+=1,e.next=11;break;case 20:v=n.filter((function(e){return(null===e||void 0===e?void 0:e.project_id)===o.state.project.id})),u.value=v.map((function(e){var t=e.id,n=e.name;return{value:t,name:n}})),c=u.value;case 23:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function m(e,t){t((function(){var t=e.toLowerCase();u.value=c.filter((function(e){return e.name.toLowerCase().indexOf(t)>-1}))}))}function O(){o.commit({type:"addQuerie",payload:n.filter((function(e){return e.id===i.value.value}))[0]})}return Object(r["watch"])((function(){return o.state.project.id}),(function(){i.value={},o.commit({type:"addQuerie",payload:{}}),d()})),Object(r["onMounted"])((function(){})),{projectsOrdered:a,selectedQuerie:i,queiresOrdered:u,filterFn:m,updateQuery:O,store:o}}};n("f41d");const C=O()(q,[["render",P],["__scopeId","data-v-0a2309b4"]]);var Q=C;w()(q,"components",{QSelect:k["a"],QField:h["a"]});var N=n("6c02"),E={name:"Setup",components:{ProjectPick:g,QueriesPick:Q},setup:function(){var e=Object(r["ref"])(!1),t=Object(N["c"])(),n=Object(f["b"])();function c(){t.push("/kanban")}return{projectSelected:e,proceedToKanbanBoard:c,store:n}}},F=(n("42ae"),n("9c40")),_=n("9404");const S=O()(E,[["render",l],["__scopeId","data-v-186402b9"]]);t["default"]=S;w()(E,"components",{QBtn:F["a"],QDrawer:_["a"]})},"9ffe":function(e,t,n){},b51d:function(e,t,n){},f41d:function(e,t,n){"use strict";n("b51d")}}]);
//# sourceMappingURL=ProjectPick.e320922e.js.map